config:
  target: "http://localhost:3000"
  phases:
    # Warm-up phase
    - duration: 60
      arrivalRate: 5
      name: "Warm up"
    
    # Ramp-up phase
    - duration: 120
      arrivalRate: 5
      rampTo: 50
      name: "Ramp up load"
    
    # Sustained load
    - duration: 300
      arrivalRate: 50
      name: "Sustained load"
    
    # Peak load
    - duration: 60
      arrivalRate: 100
      name: "Peak load"
  
  plugins:
    expect: {}
  
  variables:
    origin:
      - "MOW"
      - "NYC"
      - "LON"
      - "PAR"
    destination:
      - "LON"
      - "PAR"
      - "TYO"
      - "DXB"

scenarios:
  # Flight search scenario
  - name: "Search flights"
    weight: 60
    flow:
      - get:
          url: "/api/flights/search"
          qs:
            origin: "{{ origin }}"
            destination: "{{ destination }}"
            departDate: "2025-12-01"
            returnDate: "2025-12-10"
            adults: 2
          expect:
            - statusCode: 200
            - contentType: json
            - hasProperty: "data"
          capture:
            - json: "$.count"
              as: "resultCount"

  # Hotel search scenario
  - name: "Search hotels"
    weight: 30
    flow:
      - get:
          url: "/api/hotels/search"
          qs:
            destination: "Paris"
            checkIn: "2025-12-01"
            checkOut: "2025-12-05"
            adults: 2
          expect:
            - statusCode: 200

  # Health check scenario
  - name: "Health check"
    weight: 10
    flow:
      - get:
          url: "/api/health"
          expect:
            - statusCode: 200
