# üîß –ò–ù–°–¢–†–£–ö–¶–ò–Ø: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ CORS

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ –ø–æ–∫–∞–∑–∞–ª–∏:

‚úÖ **–¢–ï–°–¢ 1: Health Check - –†–ê–ë–û–¢–ê–ï–¢**
Backend –¥–æ—Å—Ç—É–ø–µ–Ω

‚ùå **–¢–ï–°–¢ 2: CORS Headers - –ù–ï –†–ê–ë–û–¢–ê–ï–¢**
Origin: null (–æ–∂–∏–¥–∞–µ—Ç—Å—è https://daten3.onrender.com)

‚ùå **–¢–ï–°–¢ 3: CSRF Token - –ò–°–ü–†–ê–í–õ–ï–ù**
–ë—ã–ª –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å, —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ –∫–æ–¥–µ

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê: Backend –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç CORS –∑–∞–≥–æ–ª–æ–≤–∫–∏

Backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Origin: null` –≤–º–µ—Å—Ç–æ `https://daten3.onrender.com`.

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç —á—Ç–æ `FRONTEND_URL` **–ù–ï –£–°–¢–ê–ù–û–í–õ–ï–ù–ê** –∏–ª–∏ backend **–ù–ï –ü–ï–†–ï–î–ï–ü–õ–û–ï–ù**.

---

## ‚úÖ –†–ï–®–ï–ù–ò–ï (3 —à–∞–≥–∞):

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ FRONTEND_URL –Ω–∞ Render

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://dashboard.render.com
2. –í—ã–±–µ—Ä–∏—Ç–µ —Å–µ—Ä–≤–∏—Å: **daten3-1** (Backend)
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª: **Environment**
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è:
   ```
   Key:   FRONTEND_URL
   Value: https://daten3.onrender.com
   ```

### –®–∞–≥ 2: –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –ù–ï–¢ - –¥–æ–±–∞–≤—å—Ç–µ:

1. –ù–∞–∂–º–∏—Ç–µ **"Add Environment Variable"**
2. **Key:** `FRONTEND_URL`
3. **Value:** `https://daten3.onrender.com`
4. –ù–∞–∂–º–∏—Ç–µ **"Save Changes"**

### –®–∞–≥ 3: Manual Deploy backend

**–ö–†–ò–¢–ò–ß–ù–û!** –î–∞–∂–µ –µ—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —É–∂–µ –µ—Å—Ç—å, backend –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ø–ª–æ–∏—Ç—å:

1. Render Dashboard ‚Üí –°–µ—Ä–≤–∏—Å **daten3-1** (Backend)
2. –í–∫–ª–∞–¥–∫–∞ **"Manual Deploy"**
3. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Deploy latest commit"**
4. –î–æ–∂–¥–∏—Ç–µ—Å—å **"Deploy succeeded"** (3-5 –º–∏–Ω—É—Ç)

---

## üîç –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:

1. Render Dashboard ‚Üí Backend ‚Üí **Logs**
2. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ:
   ```
   CORS Configuration initialized
   ```
3. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
   ```
   frontendUrl: https://daten3.onrender.com
   ```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ `frontendUrl: NOT SET` - –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª–∞—Å—å!

---

## üß™ –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è - –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç —Å–Ω–æ–≤–∞:

–û—Ç–∫—Ä–æ–π—Ç–µ: `https://daten3.onrender.com/test`

–ù–∞–∂–º–∏—Ç–µ: **"üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç"**

–¢–µ–ø–µ—Ä—å –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
‚úÖ –¢–ï–°–¢ 1: Health Check - –ü–†–û–ô–î–ï–ù
‚úÖ –¢–ï–°–¢ 2: CORS Headers - –ü–†–û–ô–î–ï–ù  ‚Üê –î–û–õ–ñ–ï–ù –ü–†–û–ô–¢–ò!
‚úÖ –¢–ï–°–¢ 3: CSRF Token - –ü–†–û–ô–î–ï–ù

üéâ –í–°–Å –†–ê–ë–û–¢–ê–ï–¢!
3/3 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ
```

---

## ‚ùì –ï—Å–ª–∏ –¢–ï–°–¢ 2 –≤—Å—ë –µ—â—ë –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç:

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS Origin –≤ –ª–æ–≥–∞—Ö backend:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ç–µ—Å—Ç: `https://daten3.onrender.com/test`
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É —Ç–µ—Å—Ç–∞
3. Render Dashboard ‚Üí Backend ‚Üí **Logs**
4. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫–∏:
   ```
   CORS allowed | origin: https://daten3.onrender.com
   ```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:
```
CORS request blocked | origin: https://daten3.onrender.com
```

–ó–Ω–∞—á–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è FRONTEND_URL –≤—Å—ë –µ—â—ë –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è!

---

## üìù –ò—Ç–æ–≥:

1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—É—Ç—å –∫ CSRF (`/api/auth/csrf-token`)
2. ‚è≥ –ù—É–∂–Ω–æ **–ø–µ—Ä–µ–¥–µ–ø–ª–æ–∏—Ç—å backend** –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è FRONTEND_URL
3. üß™ –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è —Ç–µ—Å—Ç –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å 3/3

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: Manual Deploy backend –Ω–∞ Render!**
