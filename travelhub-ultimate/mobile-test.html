<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üì± TravelHub Mobile Test</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 500px;
      margin: 0 auto;
    }

    h1 {
      color: white;
      font-size: 28px;
      margin-bottom: 20px;
      text-align: center;
      text-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }

    .info {
      background: white;
      padding: 15px;
      border-radius: 12px;
      margin-bottom: 15px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .info h2 {
      font-size: 18px;
      margin-bottom: 10px;
      color: #333;
    }

    .info p {
      color: #666;
      font-size: 14px;
      line-height: 1.5;
    }

    .info a {
      color: #3b82f6;
      text-decoration: none;
      word-break: break-all;
      font-size: 12px;
    }

    button {
      background: #22c55e;
      color: white;
      border: none;
      padding: 18px 30px;
      font-size: 18px;
      font-weight: bold;
      border-radius: 12px;
      width: 100%;
      margin: 10px 0;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }

    button:active {
      transform: scale(0.98);
    }

    button:disabled {
      background: #94a3b8;
      cursor: not-allowed;
    }

    .test {
      background: white;
      margin: 10px 0;
      padding: 15px;
      border-radius: 12px;
      border-left: 4px solid #eab308;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .test.success {
      border-left-color: #22c55e;
    }

    .test.error {
      border-left-color: #ef4444;
    }

    .test.pending {
      border-left-color: #eab308;
    }

    .test h3 {
      font-size: 16px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .test p {
      color: #666;
      font-size: 14px;
      margin: 5px 0;
    }

    .test code {
      background: #f1f5f9;
      padding: 2px 6px;
      border-radius: 4px;
      font-size: 12px;
      font-family: 'Courier New', monospace;
    }

    .summary {
      background: white;
      padding: 20px;
      border-radius: 12px;
      margin: 20px 0;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .summary.success {
      border: 3px solid #22c55e;
    }

    .summary.error {
      border: 3px solid #ef4444;
    }

    .summary h2 {
      font-size: 24px;
      margin-bottom: 10px;
    }

    .summary p {
      color: #666;
      font-size: 16px;
    }

    .spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #3b82f6;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .urls {
      background: white;
      padding: 15px;
      border-radius: 12px;
      margin-top: 20px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
    }

    .urls h3 {
      font-size: 16px;
      margin-bottom: 10px;
      color: #333;
    }

    .urls a {
      display: block;
      padding: 12px;
      margin: 8px 0;
      background: #f1f5f9;
      border-radius: 8px;
      color: #3b82f6;
      text-decoration: none;
      font-size: 13px;
      word-break: break-all;
      border: 1px solid #e2e8f0;
    }

    .urls a:active {
      background: #e2e8f0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üì± TravelHub Mobile Test</h1>

    <div class="info">
      <h2>‚ÑπÔ∏è –û —Ç–µ—Å—Ç–µ</h2>
      <p>–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç —Ä–∞–±–æ—Ç—É Frontend –∏ Backend –≤–∞—à–µ–≥–æ TravelHub –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.</p>
    </div>

    <button onclick="runTests()" id="testBtn">üß™ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã</button>

    <div id="results"></div>

    <div class="urls">
      <h3>üîó –ë—ã—Å—Ç—Ä—ã–µ —Å—Å—ã–ª–∫–∏ –¥–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:</h3>
      <a href="https://daten3-travel.up.railway.app" target="_blank">
        üè† Frontend (–≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)
      </a>
      <a href="https://daten3-travelbackend.up.railway.app/health" target="_blank">
        ‚ù§Ô∏è Backend Health
      </a>
      <a href="https://daten3-travelbackend.up.railway.app/api/health" target="_blank">
        üîå API Health
      </a>
      <a href="https://daten3-travelbackend.up.railway.app/api/hotels/search" target="_blank">
        üè® Hotels API
      </a>
      <a href="https://daten3-travelbackend.up.railway.app/api/flights/search" target="_blank">
        ‚úàÔ∏è Flights API
      </a>
    </div>
  </div>

  <script>
    async function runTests() {
      const results = document.getElementById('results');
      const btn = document.getElementById('testBtn');

      btn.disabled = true;
      btn.textContent = '‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...';

      results.innerHTML = '<div class="spinner"></div>';

      const tests = [];
      const apiUrl = 'https://daten3-travelbackend.up.railway.app';

      // Test 1: Frontend availability
      try {
        const frontendUrl = 'https://daten3-travel.up.railway.app';
        const r = await fetch(frontendUrl);
        if (r.ok) {
          tests.push({
            name: 'Frontend –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å',
            status: 'success',
            message: '–°–∞–π—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è',
            detail: `HTTP ${r.status}`
          });
        } else {
          tests.push({
            name: 'Frontend –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å',
            status: 'error',
            message: `HTTP ${r.status} ${r.statusText}`,
            detail: frontendUrl
          });
        }
      } catch (e) {
        tests.push({
          name: 'Frontend –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å',
          status: 'error',
          message: '–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è',
          detail: e.message
        });
      }

      // Test 2: Backend Health
      try {
        const r = await fetch(apiUrl + '/health');
        const data = await r.json();
        if (data.status === 'ok') {
          tests.push({
            name: 'Backend Health',
            status: 'success',
            message: `Uptime: ${Math.floor(data.uptime)}s`,
            detail: data.timestamp
          });
        } else {
          tests.push({
            name: 'Backend Health',
            status: 'error',
            message: '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç',
            detail: JSON.stringify(data)
          });
        }
      } catch (e) {
        tests.push({
          name: 'Backend Health',
          status: 'error',
          message: '–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è',
          detail: e.message
        });
      }

      // Test 3: API Health
      try {
        const r = await fetch(apiUrl + '/api/health');
        const data = await r.json();
        if (data.status === 'ok') {
          tests.push({
            name: 'API Health',
            status: 'success',
            message: 'API —Ä–∞–±–æ—Ç–∞–µ—Ç',
            detail: 'CORS –Ω–∞—Å—Ç—Ä–æ–µ–Ω'
          });
        } else {
          tests.push({
            name: 'API Health',
            status: 'error',
            message: '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç',
            detail: JSON.stringify(data)
          });
        }
      } catch (e) {
        tests.push({
          name: 'API Health',
          status: 'error',
          message: 'CORS –æ—à–∏–±–∫–∞ –∏–ª–∏ –Ω–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è',
          detail: e.message
        });
      }

      // Test 4: Hotels API
      try {
        const r = await fetch(apiUrl + '/api/hotels/search');
        const data = await r.json();
        if (data.message) {
          tests.push({
            name: 'Hotels API',
            status: 'success',
            message: data.message,
            detail: 'Endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç'
          });
        } else {
          tests.push({
            name: 'Hotels API',
            status: 'error',
            message: '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç',
            detail: JSON.stringify(data)
          });
        }
      } catch (e) {
        tests.push({
          name: 'Hotels API',
          status: 'error',
          message: '–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞',
          detail: e.message
        });
      }

      // Test 5: Flights API
      try {
        const r = await fetch(apiUrl + '/api/flights/search');
        const data = await r.json();
        if (data.message) {
          tests.push({
            name: 'Flights API',
            status: 'success',
            message: data.message,
            detail: 'Endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç'
          });
        } else {
          tests.push({
            name: 'Flights API',
            status: 'error',
            message: '–ù–µ–æ–∂–∏–¥–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç',
            detail: JSON.stringify(data)
          });
        }
      } catch (e) {
        tests.push({
          name: 'Flights API',
          status: 'error',
          message: '–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞',
          detail: e.message
        });
      }

      // Display results
      results.innerHTML = tests.map(t => `
        <div class="test ${t.status}">
          <h3>
            ${t.status === 'success' ? '‚úÖ' : '‚ùå'}
            ${t.name}
          </h3>
          <p><strong>${t.message}</strong></p>
          <p><code>${t.detail}</code></p>
        </div>
      `).join('');

      // Summary
      const successCount = tests.filter(t => t.status === 'success').length;
      const totalCount = tests.length;
      const allSuccess = successCount === totalCount;

      results.innerHTML += `
        <div class="summary ${allSuccess ? 'success' : 'error'}">
          <h2>${allSuccess ? 'üéâ' : '‚ö†Ô∏è'} –†–µ–∑—É–ª—å—Ç–∞—Ç</h2>
          <p><strong>${successCount} –∏–∑ ${totalCount} —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ</strong></p>
          <p>${allSuccess
            ? '–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!'
            : '–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ç—Ä–µ–±—É—é—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏'
          }</p>
        </div>
      `;

      btn.disabled = false;
      btn.textContent = 'üîÑ –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å–Ω–æ–≤–∞';
    }
  </script>
</body>
</html>
